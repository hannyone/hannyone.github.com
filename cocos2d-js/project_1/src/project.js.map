{"version":3,"sources":["resources/app.asar/node_modules/browser-pack/_prelude.js","Script/Main.js","project.js"],"names":["require","e","t","n","r","s","o","u","a","i","f","Error","code","l","exports","call","length","Main","module","cc","_RFpush","Class","extends","Component","properties","blockEdgeLength","fieldMapLRMargin","fieldMapTBMargin","blockTypeCount","fieldMapRow","fieldMapColumn","fieldMapText","default","type","Object","fieldMapImage","Node","Background","ArrowR","ArrowL","ArrowD","ArrowRU","ArrowLU","Block","Prefab","BlockT","BlockI","BlockO","BlockL","BlockRL","BlockS","BlockRS","ScoreValue","Label","onLoad","thisCanvas","this","push","j","instantiate","setPosition","p","opacity","CurrentBlock","on","EventType","TOUCH_START","event","moveRight","moveLeft","pullDownBlock","unschedule","blockDownCallback","schedule","TOUCH_END","TOUCH_CANCEL","rotateBlock","getBlockStartPosition","currentBlockNum","getBlockNum","Math","floor","random","createBlockText","currentBlockCenterIdx","currentBlockRotationMax","currentBlockRotationNum","drawBlocks","parent","director","getScene","start","checkFullLine","countBlock","deletedRow","deltaRow","string","Number","dt","isBlocked","checkedBlockCount","direction","x","y","_RFpop"],"mappings":"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","file":"project.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\"use strict\";\ncc._RFpush(module, 'c3e3fhd2P9Al6wWyp5tYOhi', 'Main');\n// Script\\Main.js\n\n'use strict';\n\ncc.Class({\n\textends: cc.Component,\n\n\tproperties: {\n\t\tblockEdgeLength: 60,\n\t\tfieldMapLRMargin: 20,\n\t\tfieldMapTBMargin: 40,\n\t\tblockTypeCount: 7,\n\t\tfieldMapRow: 20,\n\t\tfieldMapColumn: 10,\n\n\t\tfieldMapText: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Object\n\t\t},\n\t\tfieldMapImage: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Node\n\t\t},\n\n\t\tBackground: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Node\n\t\t},\n\n\t\tArrowR: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Node\n\t\t},\n\t\tArrowL: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Node\n\t\t},\n\t\tArrowD: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Node\n\t\t},\n\t\tArrowRU: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Node\n\t\t},\n\t\tArrowLU: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Node\n\t\t},\n\n\t\tBlock: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Prefab\n\t\t},\n\t\tBlockT: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Prefab\n\t\t},\n\t\tBlockI: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Prefab\n\t\t},\n\t\tBlockO: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Prefab\n\t\t},\n\t\tBlockL: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Prefab\n\t\t},\n\t\tBlockRL: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Prefab\n\t\t},\n\t\tBlockS: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Prefab\n\t\t},\n\t\tBlockRS: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Prefab\n\t\t},\n\n\t\tScoreValue: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Label\n\t\t}\n\t},\n\n\t// use this for initialization\n\tonLoad: function onLoad() {\n\t\tvar thisCanvas = this;\n\n\t\t//테두리 처리를 위해 실제보다 2줄씩 더 크게 배열 생성함\n\t\t//실제 게임이 진행되는 공간은 [1~this.fieldMapRow][1~this.fieldMapColumn] 이 됨\n\t\tthis.fieldMapText = [];\n\t\tthis.fieldMapImage = [];\n\t\tfor (var i = 0; i < this.fieldMapRow + 2; i++) {\n\t\t\tthis.fieldMapText.push([]);\n\t\t\tthis.fieldMapImage.push([]);\n\t\t\tfor (var j = 0; j < this.fieldMapColumn + 2; j++) {\n\t\t\t\tif (i === 0 || i === this.fieldMapRow + 1) {\n\t\t\t\t\t//제일 윗줄과 제일 아랫줄\n\t\t\t\t\tthis.fieldMapText[i].push(9);\n\t\t\t\t} else if (j === 0 || j === this.fieldMapColumn + 1) {\n\t\t\t\t\t//제일 왼쪽줄과 제일 오른쪽줄\n\t\t\t\t\tthis.fieldMapText[i].push(9);\n\t\t\t\t} else {\n\t\t\t\t\tthis.fieldMapText[i].push(0);\n\t\t\t\t}\n\n\t\t\t\tthis.fieldMapImage.push();\n\t\t\t\tif (i > 0 && i < this.fieldMapRow + 1) {\n\t\t\t\t\tif (j > 0 && j < this.fieldMapColumn + 1) {\n\t\t\t\t\t\tthis.fieldMapImage[i][j] = cc.instantiate(this.Block);\n\t\t\t\t\t\t//this.fieldMapImage[i][j].parent = cc.director.getScene();\n\t\t\t\t\t\t//cc.director.getScene().addChild(this.fieldMapImage);\n\t\t\t\t\t\tthis.fieldMapImage[i][j].setPosition(cc.p((j - 1) * this.blockEdgeLength + this.fieldMapLRMargin, (i - 1) * this.blockEdgeLength + this.fieldMapTBMargin));\n\t\t\t\t\t\tthis.fieldMapImage[i][j].opacity = 200;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.CurrentBlock = [];\n\t\tfor (var i = 0; i < 4; i++) {\n\t\t\tthis.CurrentBlock.push();\n\t\t}\n\n\t\tthis.ArrowR.on(cc.Node.EventType.TOUCH_START, function (event) {\n\t\t\tthisCanvas.moveRight();\n\t\t});\n\t\tthis.ArrowL.on(cc.Node.EventType.TOUCH_START, function (event) {\n\t\t\tthisCanvas.moveLeft();\n\t\t});\n\t\tthis.ArrowD.on(cc.Node.EventType.TOUCH_START, function (event) {\n\t\t\tthisCanvas.pullDownBlock();\n\t\t\tthisCanvas.unschedule(thisCanvas.blockDownCallback);\n\t\t\tthisCanvas.schedule(thisCanvas.blockDownCallback, 0.09);\n\t\t});\n\t\tthis.ArrowD.on(cc.Node.EventType.TOUCH_END, function (event) {\n\t\t\tthisCanvas.unschedule(thisCanvas.blockDownCallback);\n\t\t\tthisCanvas.schedule(thisCanvas.blockDownCallback, 1);\n\t\t});\n\t\tthis.ArrowD.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\n\t\t\tthisCanvas.unschedule(thisCanvas.blockDownCallback);\n\t\t\tthisCanvas.schedule(thisCanvas.blockDownCallback, 1);\n\t\t});\n\t\tthis.ArrowRU.on(cc.Node.EventType.TOUCH_START, function (event) {\n\t\t\tthisCanvas.rotateBlock('R');\n\t\t});\n\t\tthis.ArrowLU.on(cc.Node.EventType.TOUCH_START, function (event) {\n\t\t\tthisCanvas.rotateBlock('R');\n\t\t});\n\t},\n\n\tgetBlockStartPosition: function getBlockStartPosition() {\n\t\tif (this.currentBlockNum === 1) {\n\t\t\treturn cc.p(this.fieldMapLRMargin + this.blockEdgeLength * (this.fieldMapColumn / 2), this.blockEdgeLength * this.fieldMapRow - this.fieldMapTBMargin);\n\t\t} else {\n\t\t\treturn cc.p(this.fieldMapLRMargin + this.blockEdgeLength * (this.fieldMapColumn / 2), this.blockEdgeLength * (this.fieldMapRow - 1) - this.fieldMapTBMargin);\n\t\t}\n\t},\n\n\tgetBlockNum: function getBlockNum() {\n\t\t//http://stackoverflow.com/questions/1527803/generating-random-whole-numbers-in-javascript-in-a-specific-range\n\t\t//var blockNum = Math.floor(Math.random() * (max - min +1)) + min;\n\t\treturn Math.floor(Math.random() * this.blockTypeCount) + 2;\n\t},\n\n\t/*\n createBlock: function() {\n \tvar blockNum = this.getBlockNum();\n \tswitch(blockNum) {\n \t\tcase 0:\n \t\t\tthis.CurrentBlock = cc.instantiate(this.BlockT);\t\t\t\t\t\t\t\t\n \t\t\tbreak;\n \t\tcase 1:\n \t\t\tthis.CurrentBlock = cc.instantiate(this.BlockI);\n \t\t\tbreak;\n \t\tcase 2:\n \t\t\tthis.CurrentBlock = cc.instantiate(this.BlockO);\n \t\t\tbreak;\n \t\tcase 3:\n \t\t\tthis.CurrentBlock = cc.instantiate(this.BlockL);\n \t\t\tbreak;\n \t\tcase 4:\n \t\t\tthis.CurrentBlock = cc.instantiate(this.BlockRL);\n \t\t\tbreak;\n \t\tcase 5:\n \t\t\tthis.CurrentBlock = cc.instantiate(this.BlockS);\n \t\t\tbreak;\n \t\tcase 6:\n \t\t\tthis.CurrentBlock = cc.instantiate(this.BlockRS);\n \t\t\tbreak;\n \t}\n \tthis.CurrentBlock.parent = cc.director.getScene();\n \tthis.CurrentBlock.setPosition(this.getBlockStartPosition(blockNum));\n },\n */\n\n\tcreateBlockText: function createBlockText() {\n\t\tthis.currentBlockNum = this.getBlockNum();\n\t\tswitch (this.currentBlockNum) {\n\t\t\tcase 2:\n\t\t\t\t//T\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) - 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.currentBlockCenterIdx = [this.fieldMapRow - 1, Math.floor(this.fieldMapColumn / 2)];\n\t\t\t\tthis.currentBlockRotationMax = 4;\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\t//I\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2) - 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2) + 2] = 1;\n\t\t\t\tthis.currentBlockCenterIdx = [this.fieldMapRow, Math.floor(this.fieldMapColumn / 2)];\n\t\t\t\tthis.currentBlockRotationMax = 2;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\t//O\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.currentBlockCenterIdx = [this.fieldMapRow, Math.floor(this.fieldMapColumn / 2)];\n\t\t\t\tthis.currentBlockRotationMax = 1;\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\t//L\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) - 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.currentBlockCenterIdx = [this.fieldMapRow, Math.floor(this.fieldMapColumn / 2)];\n\t\t\t\tthis.currentBlockRotationMax = 4;\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\t//RL\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2) - 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) - 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.currentBlockCenterIdx = [this.fieldMapRow, Math.floor(this.fieldMapColumn / 2)];\n\t\t\t\tthis.currentBlockRotationMax = 4;\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\t//S\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) - 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.currentBlockCenterIdx = [this.fieldMapRow - 1, Math.floor(this.fieldMapColumn / 2)];\n\t\t\t\tthis.currentBlockRotationMax = 2;\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\t//RS\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2) - 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.currentBlockCenterIdx = [this.fieldMapRow - 1, Math.floor(this.fieldMapColumn / 2)];\n\t\t\t\tthis.currentBlockRotationMax = 2;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.currentBlockRotationNum = 1;\n\n\t\tthis.drawBlocks();\n\t\t//console.log(this.fieldMapText);\n\t},\n\n\tdrawBlocks: function drawBlocks() {\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tfor (var j = 1; j <= this.fieldMapColumn; j++) {\n\t\t\t\tif (this.fieldMapText[i][j] > 0) {\n\t\t\t\t\tthis.fieldMapImage[i][j].parent = cc.director.getScene();\n\t\t\t\t} else {\n\t\t\t\t\tthis.fieldMapImage[i][j].parent = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tstart: function start() {\n\t\t//this.createBlock();\n\t\tthis.createBlockText();\n\t\tthis.schedule(this.blockDownCallback, 1);\n\t},\n\n\t// called every frame\n\t//update: function (dt) {\n\n\t//},\n\tcheckFullLine: function checkFullLine() {\n\t\tvar countBlock;\n\t\tvar deletedRow = [null];\n\t\tvar deltaRow = 0;\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tcountBlock = 0;\n\t\t\tfor (var j = 1; j <= this.fieldMapColumn; j++) {\n\t\t\t\tif (this.fieldMapText[i][j] > 1) {\n\t\t\t\t\tcountBlock++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (countBlock === this.fieldMapColumn) {\n\t\t\t\tdeletedRow.push(true);\n\t\t\t\tthis.ScoreValue.string = Number(this.ScoreValue.string + 1);\n\t\t\t\tfor (var j = 1; j <= this.fieldMapColumn; j++) {\n\t\t\t\t\tthis.fieldMapText[i][j] = 0;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdeletedRow.push(false);\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tif (deletedRow[i]) {\n\t\t\t\tdeltaRow++;\n\t\t\t\tcontinue;\n\t\t\t} else if (deltaRow !== 0) {\n\t\t\t\tfor (var j = 1; j <= this.fieldMapColumn; j++) {\n\t\t\t\t\tthis.fieldMapText[i - deltaRow][j] = this.fieldMapText[i][j];\n\t\t\t\t\tthis.fieldMapText[i][j] = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tblockDownCallback: function blockDownCallback(dt) {\n\t\tthis.pullDownBlock();\n\t},\n\n\tpullDownBlock: function pullDownBlock() {\n\t\tvar isBlocked = false;\n\t\tvar checkedBlockCount = 0;\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tfor (var j = 1; j <= this.fieldMapColumn; j++) {\n\t\t\t\tif (this.fieldMapText[i][j] === 1) {\n\t\t\t\t\tcheckedBlockCount++;\n\t\t\t\t\tif (this.fieldMapText[i - 1][j] > 1) {\n\t\t\t\t\t\tisBlocked = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tcheckedBlockCount = 0;\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tfor (var j = 1; j <= this.fieldMapColumn; j++) {\n\t\t\t\tif (this.fieldMapText[i][j] === 1) {\n\t\t\t\t\tcheckedBlockCount++;\n\t\t\t\t\tif (isBlocked) {\n\t\t\t\t\t\tthis.fieldMapText[i][j] = this.currentBlockNum;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.fieldMapText[i][j] = 0;\n\t\t\t\t\t\tthis.fieldMapText[i - 1][j] = 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (isBlocked) {\n\t\t\tthis.checkFullLine();\n\t\t\tthis.createBlockText();\n\t\t} else {\n\t\t\tthis.currentBlockCenterIdx[0]--;\n\t\t\tthis.drawBlocks();\n\t\t}\n\t},\n\n\tmoveLeft: function moveLeft() {\n\t\tvar isBlocked = false;\n\t\tvar checkedBlockCount = 0;\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tfor (var j = 1; j <= this.fieldMapColumn; j++) {\n\t\t\t\tif (this.fieldMapText[i][j] === 1) {\n\t\t\t\t\tcheckedBlockCount++;\n\t\t\t\t\tif (this.fieldMapText[i][j - 1] > 1) {\n\t\t\t\t\t\tisBlocked = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tcheckedBlockCount = 0;\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tfor (var j = 1; j <= this.fieldMapColumn; j++) {\n\t\t\t\tif (this.fieldMapText[i][j] === 1) {\n\t\t\t\t\tcheckedBlockCount++;\n\t\t\t\t\tif (!isBlocked) {\n\t\t\t\t\t\tthis.fieldMapText[i][j] = 0;\n\t\t\t\t\t\tthis.fieldMapText[i][j - 1] = 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!isBlocked) {\n\t\t\tthis.currentBlockCenterIdx[1]--;\n\t\t\tthis.drawBlocks();\n\t\t}\n\t},\n\n\tmoveRight: function moveRight() {\n\t\tvar isBlocked = false;\n\t\tvar checkedBlockCount = 0;\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tfor (var j = this.fieldMapColumn; j >= 1; j--) {\n\t\t\t\tif (this.fieldMapText[i][j] === 1) {\n\t\t\t\t\tcheckedBlockCount++;\n\t\t\t\t\tif (this.fieldMapText[i][j + 1] > 1) {\n\t\t\t\t\t\tisBlocked = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tcheckedBlockCount = 0;\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tfor (var j = this.fieldMapColumn; j >= 1; j--) {\n\t\t\t\tif (this.fieldMapText[i][j] === 1) {\n\t\t\t\t\tcheckedBlockCount++;\n\t\t\t\t\tif (!isBlocked) {\n\t\t\t\t\t\tthis.fieldMapText[i][j] = 0;\n\t\t\t\t\t\tthis.fieldMapText[i][j + 1] = 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!isBlocked) {\n\t\t\tthis.currentBlockCenterIdx[1]++;\n\t\t\tthis.drawBlocks();\n\t\t}\n\t},\n\n\trotateBlock: function rotateBlock(direction) {\n\t\tif (direction === 'L') {\n\t\t\tif (this.currentBlockRotationNum > 1) {\n\t\t\t\tthis.currentBlockRotationNum--;\n\t\t\t} else {\n\t\t\t\tthis.currentBlockRotationNum = this.currentBlockRotationMax;\n\t\t\t}\n\t\t} else if (direction === 'R') {\n\t\t\tif (this.currentBlockRotationNum < this.currentBlockRotationMax) {\n\t\t\t\tthis.currentBlockRotationNum++;\n\t\t\t} else {\n\t\t\t\tthis.currentBlockRotationNum = 1;\n\t\t\t}\n\t\t}\n\n\t\tswitch (this.currentBlockNum) {\n\t\t\tcase 2:\n\t\t\t\t//T\t\t\t\t\n\t\t\t\tif (this.currentBlockRotationNum === 1) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t} else if (this.currentBlockRotationNum === 2) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t} else if (this.currentBlockRotationNum === 3) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t} else if (this.currentBlockRotationNum === 4) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\t//I\t\t\t\t\n\t\t\t\tif (this.currentBlockRotationNum === 1) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 2, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t} else if (this.currentBlockRotationNum === 2) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 2 };\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\t//O\n\t\t\t\treturn;\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\t//L\n\t\t\t\tif (this.currentBlockRotationNum === 1) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t} else if (this.currentBlockRotationNum === 2) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t} else if (this.currentBlockRotationNum === 3) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 2, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t} else if (this.currentBlockRotationNum === 4) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] - 2 };\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\t//RL\t\t\t\t\n\t\t\t\tif (this.currentBlockRotationNum === 1) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t} else if (this.currentBlockRotationNum === 2) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] - 2 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t} else if (this.currentBlockRotationNum === 3) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 2, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t} else if (this.currentBlockRotationNum === 4) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\t//S\t\t\t\t\n\t\t\t\tif (this.currentBlockRotationNum === 1) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t} else if (this.currentBlockRotationNum === 2) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\t//RS\n\t\t\t\tif (this.currentBlockRotationNum === 1) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t} else if (this.currentBlockRotationNum === 2) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tfor (var i = 0; i < 4; i++) {\n\t\t\tif (this.fieldMapText[this.CurrentBlock[i].y][this.CurrentBlock[i].x] > 1) {\n\t\t\t\t//roll back RotateNum\n\t\t\t\tif (direction === 'L') {\n\t\t\t\t\tif (this.currentBlockRotationNum < this.currentBlockRotationMax) {\n\t\t\t\t\t\tthis.currentBlockRotationNum++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.currentBlockRotationNum = 1;\n\t\t\t\t\t}\n\t\t\t\t} else if (direction === 'R') {\n\t\t\t\t\tif (this.currentBlockRotationNum > 1) {\n\t\t\t\t\t\tthis.currentBlockRotationNum--;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.currentBlockRotationNum = this.currentBlockRotationMax;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = this.currentBlockCenterIdx[0] - 2; i <= this.currentBlockCenterIdx[0] + 2; i++) {\n\t\t\tfor (var j = this.currentBlockCenterIdx[1] - 2; j <= this.currentBlockCenterIdx[1] + 2; j++) {\n\t\t\t\tif (i >= 0 && i < this.fieldMapRow + 2 && j >= 0 && j < this.fieldMapColumn + 2) {\n\t\t\t\t\tif (this.fieldMapText[i][j] === 1) {\n\t\t\t\t\t\tthis.fieldMapText[i][j] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0; i < 4; i++) {\n\t\t\tthis.fieldMapText[this.CurrentBlock[i].y][this.CurrentBlock[i].x] = 1;\n\t\t}\n\n\t\tthis.drawBlocks();\n\t}\n});\n\ncc._RFpop();","require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({\"Main\":[function(require,module,exports){\n\"use strict\";\ncc._RFpush(module, 'c3e3fhd2P9Al6wWyp5tYOhi', 'Main');\n// Script\\Main.js\n\n'use strict';\n\ncc.Class({\n\textends: cc.Component,\n\n\tproperties: {\n\t\tblockEdgeLength: 60,\n\t\tfieldMapLRMargin: 20,\n\t\tfieldMapTBMargin: 40,\n\t\tblockTypeCount: 7,\n\t\tfieldMapRow: 20,\n\t\tfieldMapColumn: 10,\n\n\t\tfieldMapText: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Object\n\t\t},\n\t\tfieldMapImage: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Node\n\t\t},\n\n\t\tBackground: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Node\n\t\t},\n\n\t\tArrowR: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Node\n\t\t},\n\t\tArrowL: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Node\n\t\t},\n\t\tArrowD: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Node\n\t\t},\n\t\tArrowRU: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Node\n\t\t},\n\t\tArrowLU: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Node\n\t\t},\n\n\t\tBlock: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Prefab\n\t\t},\n\t\tBlockT: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Prefab\n\t\t},\n\t\tBlockI: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Prefab\n\t\t},\n\t\tBlockO: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Prefab\n\t\t},\n\t\tBlockL: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Prefab\n\t\t},\n\t\tBlockRL: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Prefab\n\t\t},\n\t\tBlockS: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Prefab\n\t\t},\n\t\tBlockRS: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Prefab\n\t\t},\n\n\t\tScoreValue: {\n\t\t\tdefault: null,\n\t\t\ttype: cc.Label\n\t\t}\n\t},\n\n\t// use this for initialization\n\tonLoad: function onLoad() {\n\t\tvar thisCanvas = this;\n\n\t\t//테두리 처리를 위해 실제보다 2줄씩 더 크게 배열 생성함\n\t\t//실제 게임이 진행되는 공간은 [1~this.fieldMapRow][1~this.fieldMapColumn] 이 됨\n\t\tthis.fieldMapText = [];\n\t\tthis.fieldMapImage = [];\n\t\tfor (var i = 0; i < this.fieldMapRow + 2; i++) {\n\t\t\tthis.fieldMapText.push([]);\n\t\t\tthis.fieldMapImage.push([]);\n\t\t\tfor (var j = 0; j < this.fieldMapColumn + 2; j++) {\n\t\t\t\tif (i === 0 || i === this.fieldMapRow + 1) {\n\t\t\t\t\t//제일 윗줄과 제일 아랫줄\n\t\t\t\t\tthis.fieldMapText[i].push(9);\n\t\t\t\t} else if (j === 0 || j === this.fieldMapColumn + 1) {\n\t\t\t\t\t//제일 왼쪽줄과 제일 오른쪽줄\n\t\t\t\t\tthis.fieldMapText[i].push(9);\n\t\t\t\t} else {\n\t\t\t\t\tthis.fieldMapText[i].push(0);\n\t\t\t\t}\n\n\t\t\t\tthis.fieldMapImage.push();\n\t\t\t\tif (i > 0 && i < this.fieldMapRow + 1) {\n\t\t\t\t\tif (j > 0 && j < this.fieldMapColumn + 1) {\n\t\t\t\t\t\tthis.fieldMapImage[i][j] = cc.instantiate(this.Block);\n\t\t\t\t\t\t//this.fieldMapImage[i][j].parent = cc.director.getScene();\n\t\t\t\t\t\t//cc.director.getScene().addChild(this.fieldMapImage);\n\t\t\t\t\t\tthis.fieldMapImage[i][j].setPosition(cc.p((j - 1) * this.blockEdgeLength + this.fieldMapLRMargin, (i - 1) * this.blockEdgeLength + this.fieldMapTBMargin));\n\t\t\t\t\t\tthis.fieldMapImage[i][j].opacity = 200;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.CurrentBlock = [];\n\t\tfor (var i = 0; i < 4; i++) {\n\t\t\tthis.CurrentBlock.push();\n\t\t}\n\n\t\tthis.ArrowR.on(cc.Node.EventType.TOUCH_START, function (event) {\n\t\t\tthisCanvas.moveRight();\n\t\t});\n\t\tthis.ArrowL.on(cc.Node.EventType.TOUCH_START, function (event) {\n\t\t\tthisCanvas.moveLeft();\n\t\t});\n\t\tthis.ArrowD.on(cc.Node.EventType.TOUCH_START, function (event) {\n\t\t\tthisCanvas.pullDownBlock();\n\t\t\tthisCanvas.unschedule(thisCanvas.blockDownCallback);\n\t\t\tthisCanvas.schedule(thisCanvas.blockDownCallback, 0.09);\n\t\t});\n\t\tthis.ArrowD.on(cc.Node.EventType.TOUCH_END, function (event) {\n\t\t\tthisCanvas.unschedule(thisCanvas.blockDownCallback);\n\t\t\tthisCanvas.schedule(thisCanvas.blockDownCallback, 1);\n\t\t});\n\t\tthis.ArrowD.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\n\t\t\tthisCanvas.unschedule(thisCanvas.blockDownCallback);\n\t\t\tthisCanvas.schedule(thisCanvas.blockDownCallback, 1);\n\t\t});\n\t\tthis.ArrowRU.on(cc.Node.EventType.TOUCH_START, function (event) {\n\t\t\tthisCanvas.rotateBlock('R');\n\t\t});\n\t\tthis.ArrowLU.on(cc.Node.EventType.TOUCH_START, function (event) {\n\t\t\tthisCanvas.rotateBlock('R');\n\t\t});\n\t},\n\n\tgetBlockStartPosition: function getBlockStartPosition() {\n\t\tif (this.currentBlockNum === 1) {\n\t\t\treturn cc.p(this.fieldMapLRMargin + this.blockEdgeLength * (this.fieldMapColumn / 2), this.blockEdgeLength * this.fieldMapRow - this.fieldMapTBMargin);\n\t\t} else {\n\t\t\treturn cc.p(this.fieldMapLRMargin + this.blockEdgeLength * (this.fieldMapColumn / 2), this.blockEdgeLength * (this.fieldMapRow - 1) - this.fieldMapTBMargin);\n\t\t}\n\t},\n\n\tgetBlockNum: function getBlockNum() {\n\t\t//http://stackoverflow.com/questions/1527803/generating-random-whole-numbers-in-javascript-in-a-specific-range\n\t\t//var blockNum = Math.floor(Math.random() * (max - min +1)) + min;\n\t\treturn Math.floor(Math.random() * this.blockTypeCount) + 2;\n\t},\n\n\t/*\n createBlock: function() {\n \tvar blockNum = this.getBlockNum();\n \tswitch(blockNum) {\n \t\tcase 0:\n \t\t\tthis.CurrentBlock = cc.instantiate(this.BlockT);\t\t\t\t\t\t\t\t\n \t\t\tbreak;\n \t\tcase 1:\n \t\t\tthis.CurrentBlock = cc.instantiate(this.BlockI);\n \t\t\tbreak;\n \t\tcase 2:\n \t\t\tthis.CurrentBlock = cc.instantiate(this.BlockO);\n \t\t\tbreak;\n \t\tcase 3:\n \t\t\tthis.CurrentBlock = cc.instantiate(this.BlockL);\n \t\t\tbreak;\n \t\tcase 4:\n \t\t\tthis.CurrentBlock = cc.instantiate(this.BlockRL);\n \t\t\tbreak;\n \t\tcase 5:\n \t\t\tthis.CurrentBlock = cc.instantiate(this.BlockS);\n \t\t\tbreak;\n \t\tcase 6:\n \t\t\tthis.CurrentBlock = cc.instantiate(this.BlockRS);\n \t\t\tbreak;\n \t}\n \tthis.CurrentBlock.parent = cc.director.getScene();\n \tthis.CurrentBlock.setPosition(this.getBlockStartPosition(blockNum));\n },\n */\n\n\tcreateBlockText: function createBlockText() {\n\t\tthis.currentBlockNum = this.getBlockNum();\n\t\tswitch (this.currentBlockNum) {\n\t\t\tcase 2:\n\t\t\t\t//T\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) - 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.currentBlockCenterIdx = [this.fieldMapRow - 1, Math.floor(this.fieldMapColumn / 2)];\n\t\t\t\tthis.currentBlockRotationMax = 4;\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\t//I\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2) - 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2) + 2] = 1;\n\t\t\t\tthis.currentBlockCenterIdx = [this.fieldMapRow, Math.floor(this.fieldMapColumn / 2)];\n\t\t\t\tthis.currentBlockRotationMax = 2;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\t//O\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.currentBlockCenterIdx = [this.fieldMapRow, Math.floor(this.fieldMapColumn / 2)];\n\t\t\t\tthis.currentBlockRotationMax = 1;\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\t//L\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) - 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.currentBlockCenterIdx = [this.fieldMapRow, Math.floor(this.fieldMapColumn / 2)];\n\t\t\t\tthis.currentBlockRotationMax = 4;\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\t//RL\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2) - 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) - 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.currentBlockCenterIdx = [this.fieldMapRow, Math.floor(this.fieldMapColumn / 2)];\n\t\t\t\tthis.currentBlockRotationMax = 4;\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\t//S\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) - 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.currentBlockCenterIdx = [this.fieldMapRow - 1, Math.floor(this.fieldMapColumn / 2)];\n\t\t\t\tthis.currentBlockRotationMax = 2;\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\t//RS\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2) - 1] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2)] = 1;\n\t\t\t\tthis.fieldMapText[this.fieldMapRow - 1][Math.floor(this.fieldMapColumn / 2) + 1] = 1;\n\t\t\t\tthis.currentBlockCenterIdx = [this.fieldMapRow - 1, Math.floor(this.fieldMapColumn / 2)];\n\t\t\t\tthis.currentBlockRotationMax = 2;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.currentBlockRotationNum = 1;\n\n\t\tthis.drawBlocks();\n\t\t//console.log(this.fieldMapText);\n\t},\n\n\tdrawBlocks: function drawBlocks() {\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tfor (var j = 1; j <= this.fieldMapColumn; j++) {\n\t\t\t\tif (this.fieldMapText[i][j] > 0) {\n\t\t\t\t\tthis.fieldMapImage[i][j].parent = cc.director.getScene();\n\t\t\t\t} else {\n\t\t\t\t\tthis.fieldMapImage[i][j].parent = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tstart: function start() {\n\t\t//this.createBlock();\n\t\tthis.createBlockText();\n\t\tthis.schedule(this.blockDownCallback, 1);\n\t},\n\n\t// called every frame\n\t//update: function (dt) {\n\n\t//},\n\tcheckFullLine: function checkFullLine() {\n\t\tvar countBlock;\n\t\tvar deletedRow = [null];\n\t\tvar deltaRow = 0;\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tcountBlock = 0;\n\t\t\tfor (var j = 1; j <= this.fieldMapColumn; j++) {\n\t\t\t\tif (this.fieldMapText[i][j] > 1) {\n\t\t\t\t\tcountBlock++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (countBlock === this.fieldMapColumn) {\n\t\t\t\tdeletedRow.push(true);\n\t\t\t\tthis.ScoreValue.string = Number(this.ScoreValue.string + 1);\n\t\t\t\tfor (var j = 1; j <= this.fieldMapColumn; j++) {\n\t\t\t\t\tthis.fieldMapText[i][j] = 0;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdeletedRow.push(false);\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tif (deletedRow[i]) {\n\t\t\t\tdeltaRow++;\n\t\t\t\tcontinue;\n\t\t\t} else if (deltaRow !== 0) {\n\t\t\t\tfor (var j = 1; j <= this.fieldMapColumn; j++) {\n\t\t\t\t\tthis.fieldMapText[i - deltaRow][j] = this.fieldMapText[i][j];\n\t\t\t\t\tthis.fieldMapText[i][j] = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tblockDownCallback: function blockDownCallback(dt) {\n\t\tthis.pullDownBlock();\n\t},\n\n\tpullDownBlock: function pullDownBlock() {\n\t\tvar isBlocked = false;\n\t\tvar checkedBlockCount = 0;\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tfor (var j = 1; j <= this.fieldMapColumn; j++) {\n\t\t\t\tif (this.fieldMapText[i][j] === 1) {\n\t\t\t\t\tcheckedBlockCount++;\n\t\t\t\t\tif (this.fieldMapText[i - 1][j] > 1) {\n\t\t\t\t\t\tisBlocked = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tcheckedBlockCount = 0;\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tfor (var j = 1; j <= this.fieldMapColumn; j++) {\n\t\t\t\tif (this.fieldMapText[i][j] === 1) {\n\t\t\t\t\tcheckedBlockCount++;\n\t\t\t\t\tif (isBlocked) {\n\t\t\t\t\t\tthis.fieldMapText[i][j] = this.currentBlockNum;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.fieldMapText[i][j] = 0;\n\t\t\t\t\t\tthis.fieldMapText[i - 1][j] = 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (isBlocked) {\n\t\t\tthis.checkFullLine();\n\t\t\tthis.createBlockText();\n\t\t} else {\n\t\t\tthis.currentBlockCenterIdx[0]--;\n\t\t\tthis.drawBlocks();\n\t\t}\n\t},\n\n\tmoveLeft: function moveLeft() {\n\t\tvar isBlocked = false;\n\t\tvar checkedBlockCount = 0;\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tfor (var j = 1; j <= this.fieldMapColumn; j++) {\n\t\t\t\tif (this.fieldMapText[i][j] === 1) {\n\t\t\t\t\tcheckedBlockCount++;\n\t\t\t\t\tif (this.fieldMapText[i][j - 1] > 1) {\n\t\t\t\t\t\tisBlocked = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tcheckedBlockCount = 0;\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tfor (var j = 1; j <= this.fieldMapColumn; j++) {\n\t\t\t\tif (this.fieldMapText[i][j] === 1) {\n\t\t\t\t\tcheckedBlockCount++;\n\t\t\t\t\tif (!isBlocked) {\n\t\t\t\t\t\tthis.fieldMapText[i][j] = 0;\n\t\t\t\t\t\tthis.fieldMapText[i][j - 1] = 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!isBlocked) {\n\t\t\tthis.currentBlockCenterIdx[1]--;\n\t\t\tthis.drawBlocks();\n\t\t}\n\t},\n\n\tmoveRight: function moveRight() {\n\t\tvar isBlocked = false;\n\t\tvar checkedBlockCount = 0;\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tfor (var j = this.fieldMapColumn; j >= 1; j--) {\n\t\t\t\tif (this.fieldMapText[i][j] === 1) {\n\t\t\t\t\tcheckedBlockCount++;\n\t\t\t\t\tif (this.fieldMapText[i][j + 1] > 1) {\n\t\t\t\t\t\tisBlocked = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tcheckedBlockCount = 0;\n\t\tfor (var i = 1; i <= this.fieldMapRow; i++) {\n\t\t\tfor (var j = this.fieldMapColumn; j >= 1; j--) {\n\t\t\t\tif (this.fieldMapText[i][j] === 1) {\n\t\t\t\t\tcheckedBlockCount++;\n\t\t\t\t\tif (!isBlocked) {\n\t\t\t\t\t\tthis.fieldMapText[i][j] = 0;\n\t\t\t\t\t\tthis.fieldMapText[i][j + 1] = 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (checkedBlockCount === 4) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!isBlocked) {\n\t\t\tthis.currentBlockCenterIdx[1]++;\n\t\t\tthis.drawBlocks();\n\t\t}\n\t},\n\n\trotateBlock: function rotateBlock(direction) {\n\t\tif (direction === 'L') {\n\t\t\tif (this.currentBlockRotationNum > 1) {\n\t\t\t\tthis.currentBlockRotationNum--;\n\t\t\t} else {\n\t\t\t\tthis.currentBlockRotationNum = this.currentBlockRotationMax;\n\t\t\t}\n\t\t} else if (direction === 'R') {\n\t\t\tif (this.currentBlockRotationNum < this.currentBlockRotationMax) {\n\t\t\t\tthis.currentBlockRotationNum++;\n\t\t\t} else {\n\t\t\t\tthis.currentBlockRotationNum = 1;\n\t\t\t}\n\t\t}\n\n\t\tswitch (this.currentBlockNum) {\n\t\t\tcase 2:\n\t\t\t\t//T\t\t\t\t\n\t\t\t\tif (this.currentBlockRotationNum === 1) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t} else if (this.currentBlockRotationNum === 2) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t} else if (this.currentBlockRotationNum === 3) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t} else if (this.currentBlockRotationNum === 4) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\t//I\t\t\t\t\n\t\t\t\tif (this.currentBlockRotationNum === 1) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 2, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t} else if (this.currentBlockRotationNum === 2) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 2 };\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\t//O\n\t\t\t\treturn;\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\t//L\n\t\t\t\tif (this.currentBlockRotationNum === 1) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t} else if (this.currentBlockRotationNum === 2) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t} else if (this.currentBlockRotationNum === 3) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 2, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t} else if (this.currentBlockRotationNum === 4) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] - 2 };\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\t//RL\t\t\t\t\n\t\t\t\tif (this.currentBlockRotationNum === 1) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t} else if (this.currentBlockRotationNum === 2) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] - 2 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t} else if (this.currentBlockRotationNum === 3) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 2, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t} else if (this.currentBlockRotationNum === 4) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\t//S\t\t\t\t\n\t\t\t\tif (this.currentBlockRotationNum === 1) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t} else if (this.currentBlockRotationNum === 2) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\t//RS\n\t\t\t\tif (this.currentBlockRotationNum === 1) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1] - 1, y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t} else if (this.currentBlockRotationNum === 2) {\n\t\t\t\t\tthis.CurrentBlock[0] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] - 1 };\n\t\t\t\t\tthis.CurrentBlock[1] = { x: this.currentBlockCenterIdx[1], y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[2] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] };\n\t\t\t\t\tthis.CurrentBlock[3] = { x: this.currentBlockCenterIdx[1] + 1, y: this.currentBlockCenterIdx[0] + 1 };\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tfor (var i = 0; i < 4; i++) {\n\t\t\tif (this.fieldMapText[this.CurrentBlock[i].y][this.CurrentBlock[i].x] > 1) {\n\t\t\t\t//roll back RotateNum\n\t\t\t\tif (direction === 'L') {\n\t\t\t\t\tif (this.currentBlockRotationNum < this.currentBlockRotationMax) {\n\t\t\t\t\t\tthis.currentBlockRotationNum++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.currentBlockRotationNum = 1;\n\t\t\t\t\t}\n\t\t\t\t} else if (direction === 'R') {\n\t\t\t\t\tif (this.currentBlockRotationNum > 1) {\n\t\t\t\t\t\tthis.currentBlockRotationNum--;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.currentBlockRotationNum = this.currentBlockRotationMax;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = this.currentBlockCenterIdx[0] - 2; i <= this.currentBlockCenterIdx[0] + 2; i++) {\n\t\t\tfor (var j = this.currentBlockCenterIdx[1] - 2; j <= this.currentBlockCenterIdx[1] + 2; j++) {\n\t\t\t\tif (i >= 0 && i < this.fieldMapRow + 2 && j >= 0 && j < this.fieldMapColumn + 2) {\n\t\t\t\t\tif (this.fieldMapText[i][j] === 1) {\n\t\t\t\t\t\tthis.fieldMapText[i][j] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0; i < 4; i++) {\n\t\t\tthis.fieldMapText[this.CurrentBlock[i].y][this.CurrentBlock[i].x] = 1;\n\t\t}\n\n\t\tthis.drawBlocks();\n\t}\n});\n\ncc._RFpop();\n},{}]},{},[\"Main\"])\n\n"],"sourceRoot":"/source/"}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZXNDb250ZW50IjpbXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=